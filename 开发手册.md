# 开发手册

## 遇到的问题

### 1. RocksDB相关

1.1 利用Rocks DB存储数据，当对某个类型（例如Account）进行修改之后，再把account类型的数据存储进数据库时会发生错误。报的错误是序列化相关问题

出现原因是前后版本不一致，在将byte数组进行反序列化的过程中出现了问题，解决办法将Rocks DB文件夹删除，再进行存储就可以了

1.2 存储account类型的数据时，私钥可以输出，但是存入数据库取出来之后显示为null

出现原因是序列化相关的问题，因为自定义的SKType没有序列化，

1.3 存入Rocks DB的account类型永远只有一条数据

出现原因是因为rocks DB是key-value类型数据库，根据key存储，而设计的account类型的key是wallet_+accountAddress，而account地址是公钥的哈希，之前的地址方法为

```java
account.setAccountAddr(Cryptography.myHash(pk.toString()));
```

其中pk是一个引用类型，是对pk的地址进行哈希，所以得出的值都是一样的，所以只存储了一条数据，解决方法:将account的值进行哈希，问题解决

```java
account.setAccountAddr(Cryptography.myHash(pk.value.toString()));
```

